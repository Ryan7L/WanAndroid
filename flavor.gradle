def KEYSTORE_FILE = null
def KEYSTORE_FILE_PASSWORD = null
def KEYSTORE_ALIAS = null
def KEYSTORE_ALIAS_PASSWORD = null

def APPID_BUGLY_FOR_PER = null
def APPKEY_BUGLY_FOR_PER = null
def APPID_BUGLY_FOR_COM = null
def APPKEY_BUGLY_FOR_COM = null

def CDKEY_CLASS = null
def DEVELOPER_ID = null

def WANPWD_FORMAT = null
def WANPWD_PATTERN = null
def WANPWD_TYPE_CREATE_CDKEY = null
def WANPWD_TYPE_QQ = null
def WANPWD_TYPE_FESTIVAL = null
def WANPWD_TYPE_USERPAGE = null
def WANPWD_TYPE_CDKEY = null
def WANPWD_TYPE_WEB = null
def WANPWD_TYPE_ABOUTME = null

if (project.rootProject.file('local.properties').exists()) {
    Properties properties = new Properties()
    InputStream inputStream = project.rootProject.file('local.properties').newDataInputStream()
    properties.load(inputStream)

    KEYSTORE_FILE = properties.getProperty('KEYSTORE_FILE')
    KEYSTORE_FILE_PASSWORD = properties.getProperty('KEYSTORE_FILE_PASSWORD')
    KEYSTORE_ALIAS = properties.getProperty('KEYSTORE_ALIAS')
    KEYSTORE_ALIAS_PASSWORD = properties.getProperty('KEYSTORE_ALIAS_PASSWORD')

    APPID_BUGLY_FOR_PER = properties.getProperty('APPID_BUGLY_FOR_PER')
    APPKEY_BUGLY_FOR_PER = properties.getProperty('APPKEY_BUGLY_FOR_PER')
    APPID_BUGLY_FOR_COM = properties.getProperty('APPID_BUGLY_FOR_COM')
    APPKEY_BUGLY_FOR_COM = properties.getProperty('APPKEY_BUGLY_FOR_COM')

    WANPWD_FORMAT = properties.getProperty('WANPWD_FORMAT')
    WANPWD_PATTERN = properties.getProperty('WANPWD_PATTERN')
    WANPWD_TYPE_QQ = properties.getProperty('WANPWD_TYPE_QQ')
    WANPWD_TYPE_FESTIVAL = properties.getProperty('WANPWD_TYPE_FESTIVAL')
    WANPWD_TYPE_USERPAGE = properties.getProperty('WANPWD_TYPE_USERPAGE')
    WANPWD_TYPE_CDKEY = properties.getProperty('WANPWD_TYPE_CDKEY')
    WANPWD_TYPE_WEB = properties.getProperty('WANPWD_TYPE_WEB')
    WANPWD_TYPE_ABOUTME = properties.getProperty('WANPWD_TYPE_ABOUTME')
    WANPWD_TYPE_CREATE_CDKEY = properties.getProperty('WANPWD_TYPE_CREATE_CDKEY')
    CDKEY_CLASS = properties.getProperty('CDKEY_CLASS')
    DEVELOPER_ID = properties.getProperty('DEVELOPER_ID')
}

android {
    signingConfigs {
        release {
            if (KEYSTORE_FILE != null) {
                storeFile file(KEYSTORE_FILE)
                storePassword KEYSTORE_FILE_PASSWORD
                keyAlias KEYSTORE_ALIAS
                keyPassword KEYSTORE_ALIAS_PASSWORD
            }
        }
        debug {
            if (KEYSTORE_FILE != null) {
                storeFile file(KEYSTORE_FILE)
                storePassword KEYSTORE_FILE_PASSWORD
                keyAlias KEYSTORE_ALIAS
                keyPassword KEYSTORE_ALIAS_PASSWORD
            }
        }
    }
    buildTypes {
        release {
            shrinkResources false
            signingConfig signingConfigs.release
        }
        debug {
            shrinkResources false
            signingConfig signingConfigs.debug
        }
    }
    flavorDimensions "applicationId"
    productFlavors {
        per {
            dimension "applicationId"
            applicationId "per.goweii.wanandroid"
            ext.buglyAppId = APPID_BUGLY_FOR_PER
            ext.buglyAppKey = APPKEY_BUGLY_FOR_PER
        }
        com {
            dimension "applicationId"
            applicationId "com.goweii.wanandroid"
            ext.buglyAppId = APPID_BUGLY_FOR_COM
            ext.buglyAppKey = APPKEY_BUGLY_FOR_COM
        }
    }
    productFlavors.all { flavor ->
        buildConfigField "String", "APPID_BUGLY", "\"${ext.buglyAppId}\""
        buildConfigField "String", "APPKEY_BUGLY", "\"${ext.buglyAppKey}\""
        buildConfigField "String", "WANPWD_FORMAT", "\"${WANPWD_FORMAT}\""
        buildConfigField "String", "WANPWD_PATTERN", "\"${WANPWD_PATTERN}\""
        buildConfigField "String", "WANPWD_TYPE_QQ", "\"${WANPWD_TYPE_QQ}\""
        buildConfigField "String", "WANPWD_TYPE_FESTIVAL", "\"${WANPWD_TYPE_FESTIVAL}\""
        buildConfigField "String", "WANPWD_TYPE_USERPAGE", "\"${WANPWD_TYPE_USERPAGE}\""
        buildConfigField "String", "WANPWD_TYPE_CDKEY", "\"${WANPWD_TYPE_CDKEY}\""
        buildConfigField "String", "WANPWD_TYPE_WEB", "\"${WANPWD_TYPE_WEB}\""
        buildConfigField "String", "WANPWD_TYPE_ABOUTME", "\"${WANPWD_TYPE_ABOUTME}\""
        buildConfigField "String", "WANPWD_TYPE_CREATE_CDKEY", "\"${WANPWD_TYPE_CREATE_CDKEY}\""
        buildConfigField "String", "CDKEY_CLASS", "\"${CDKEY_CLASS}\""
        buildConfigField "String", "DEVELOPER_ID", "\"${DEVELOPER_ID}\""
    }
}